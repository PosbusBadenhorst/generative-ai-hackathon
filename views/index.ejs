<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/index.css" rel="stylesheet" />
    <title>GenAI Hackathon Team 21</title>
</head>
<body>
    <header>
        <h1>GenAI Hackathon Team 21</h1>
        <div class="avatar">
            <button class="avatar__select">
                Talking with <%= user.avatarname %>
                <img src="<%= user.img %>" alt="chat-bot avatar" />
            </button>
        </div>
        <div class="auth">
            <% if (user) { %>
                <p>Logged in as <strong><%= user.name %></strong> <a href="logout">logout</a></p>
            <% } else { %>
                <a href="login">login</a>
            <% } %>
        </div>
    </header>
    <div id="chat-log">
        <div class="message--sent">
            <div class='message__text ${role}'>
                Hi<%= user ? ' ' + user.name : '' %>! I'm NatWest EASE, your own personal PICOE bot. What would you like to know?
            </div>
        </div>
    </div>
    <div class="typing hidden">
        <div class="typing__dot"></div>
        <div class="typing__dot"></div>
        <div class="typing__dot"></div>
    </div>
    <div id="content">
      
        <!-- added "id=video-wrapper" -->
        <div id="video-wrapper">
          <div>
            <video id="talk-video" width=400 height=400 autoplay></video>
          </div>
        </div>
        <br>
  
        <!-- added div#buttons -->
        <div id="buttons">
        <button id="connect-button" type="button">Connect</button>
        <button id="talk-button" type="button">Start</button>
        <button id="destroy-button" type="button">Destroy</button>
      </div>
    
      <!-- added div#status -->
        <div id="status">
        <!-- removed the wrapping <div> tags -->
        <!-- ICE gathering status: <label id="ice-gathering-status-label"></label><br>
        ICE status: <label id="ice-status-label"></label><br>
        Peer connection status: <label id="peer-status-label"></label><br>
        Signaling status: <label id="signaling-status-label"></label><br> -->
      </div>
    </div>
    <form action="" class="user-input">
        <input type="text" name="message" id="message" placeholder="Type your question here..." autofocus />
        <button type="submit">Send</button>
    </form>
    <div class="avatar-menu hidden">
        <div class="avatar-menu__wrapper">
            <button class="close">Close</button>
            <h3 class="avatar-menu__title">Select a virtual avatar to talk with</h3>
            <ul class="avatar-menu__menu">
                <% avatarUrls.forEach(avatar => { %>
                    <li>
                        <a href="/user/preferences?avatarname=<%= avatar.name %>&img=<%= avatar.url %>" data-name="<%= avatar.name %>" data-url="<%= avatar.url %>">
                            <img src="<%= avatar.url %>" alt="chat-bot avatar" />
                            <p><%= avatar.name %></p>
                        </a>
                        <!-- <button data-name="<%= avatar.name %>" data-url="<%= avatar.url %>">
                            <img src="<%= avatar.url %>" alt="chat-bot avatar" />
                            <p><%= avatar.name %></p>
                        </button> -->
                    </li>
                <% }) %>
            </ul>
        </div>
    </div>
</body>
<script src="/js/index.js"></script>
<script type="module" src="../js/streaming-client-api.js"></script>
</html>